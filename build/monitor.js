var HZM=function(e,t){"use strict";t.settings={DEBUG:!1};var o=function(){},a=function(){},r=function(){},i=function(){};Function.prototype.before=function(e){var t=this;return function(){return e.apply(this,arguments)===!1?!1:t.apply(this,arguments)}},Function.prototype.after=function(e){var t=this;return function(){var o=t.apply(this,arguments);return o===!1?!1:(e.apply(this,arguments),o)}};var n=function(e,t){console.log(t);for(var a=null,r=new o,i=document.getElementsByTagName("script"),n=0;n<i.length;n++)if(a=i[n].src){var Z=a.match(/\/monitor.js.*[?&]pageid=(\d+)/);Z&&Z[1]&&(r.PAGEID=Z[1])}if(window.localStorage&&null!==window.localStorage)if(r.TYPE=0,localStorage.hasOwnProperty("HZSEQ")&&localStorage.hasOwnProperty("HZMAC")&&localStorage.hasOwnProperty("HZNUM"))r.HZSEQ=localStorage.getItem("HZSEQ"),r.HZMAC=localStorage.getItem("HZMAC"),t?r.HZNUM=parseInt(localStorage.getItem("HZNUM"))+1:r.HZNUM=parseInt(localStorage.getItem("HZNUM")),localStorage.setItem("HZNUM",r.HZNUM),GZL.setCookie("HZNUM",r.HZNUM,{expires:1e4}),e(r);else{var s=GZL.generateUUID();localStorage.setItem("HZMAC",s),localStorage.setItem("HZNUM",0),GZL.setCookie("HZMAC",s,{expires:1e4}),GZL.setCookie("HZNUM","0",{expires:1e4}),r.HZNUM=localStorage.getItem("HZNUM"),r.HZMAC=s,GZL.ajax({url:CONFIG.REPORT_API+"/getseq.do",data:{appid:CONFIG.APPID,machineid:s},success:function(t){if(200===t.status)localStorage.setItem("HZSEQ",t.data.seq),GZL.setCookie("HZSEQ",t.data.seq,{expires:1e4}),r.HZSEQ=localStorage.getItem("HZSEQ");else{var o=GZL.Md5(CONFIG.APPID+s);localStorage.setItem("HZSEQ",o),GZL.setCookie("HZSEQ",o,{expires:1e4}),r.HZSEQ=localStorage.getItem("HZSEQ")}e(r)},error:function(){var t=GZL.Md5(CONFIG.APPID+s);localStorage.setItem("HZSEQ",t),GZL.setCookie("HZSEQ",t,{expires:1e4}),r.HZSEQ=localStorage.getItem("HZSEQ"),e(r)}})}else{var l=GZL.getAllCookies();if(r.TYPE=1,l.hasOwnProperty("HZSEQ")&&l.hasOwnProperty("HZMAC")&&l.hasOwnProperty("HZNUM"))r.HZSEQ=l.getCookie("HZSEQ"),r.HZMAC=l.getCookie("HZMAC"),t?r.HZNUM=parseInt(l.getCookie("HZNUM"))+1:r.HZNUM=parseInt(l.getCookie("HZNUM")),GZL.setCookie("HZNUM",r.HZNUM,{expires:1e4}),e(r);else{var H=GZL.generateUUID();GZL.setCookie("HZMAC",H,{expires:1e4}),GZL.setCookie("HZNUM","0",{expires:1e4}),r.HZNUM=l.getCookie("HZNUM"),r.HZMAC=H,GZL.ajax({url:CONFIG.REPORT_API+"/getseq.do",data:{appid:CONFIG.APPID,machineid:H},success:function(t){if(200===t.status)GZL.setCookie("HZSEQ",t.data.seq,{expires:1e4}),r.HZSEQ=localStorage.getItem("HZSEQ");else{var o=GZL.Md5(CONFIG.APPID+H);GZL.setCookie("HZSEQ",o,{expires:1e4}),r.HZSEQ=localStorage.getItem("HZSEQ")}e(r)},error:function(){var t=GZL.Md5(CONFIG.APPID+H);GZL.setCookie("HZSEQ",t,{expires:1e4}),r.HZSEQ=localStorage.getItem("HZSEQ"),e(r)}})}}};return t.reportCV=function(e){n(function(t){var o=new i;o.appid=CONFIG.APPID,o.channel=CONFIG.CHANNEL,o.timestamp=(new Date).valueOf(),o.machineid=t.HZMAC,o.flagid=e,o.platform=GZL.getPlatform(),o.seqid=t.HZSEQ+"_"+t.HZNUM,o.type=2,o.pageid=t.PAGEID,o.tag="CV_WAP",o.other={key:"HZ-XM"},console.log(o);var a=[];a.push(o),GZL.ajax({url:CONFIG.REPORT_API+"/gather.do",method:"POST",data:{data:JSON.stringify(a)}})},!0)},t.returnCode=function(e){n(function(t){var o=new r;o.appid=CONFIG.APPID,o.channel=CONFIG.CHANNEL,o.type=5,o.stime=e.stime||0,o.machineid=t.HZMAC,o.pageid=t.PAGEID,o.platform=GZL.getPlatform(),o.request=e.url||"Not-Found",o.code=e.code||0,o.etime=e.etime||0,o.seqid=t.HZSEQ+"_"+t.HZNUM,o.tag="CODE_WAP",console.log(o);var a=[];a.push(o),GZL.ajax({url:CONFIG.REPORT_API+"/gather.do",method:"POST",data:{data:JSON.stringify(a)}})},!1)},e.onload=(e.onload||function(){}).before(function(){n(function(e){console.log(e);var t=new a;t.appid=CONFIG.APPID,t.channel=CONFIG.CHANNEL,t.stime=stime,t.etime=etime,t.machineid=e.HZMAC,t.platform=GZL.getPlatform(),t.seqid=e.HZSEQ+"_"+e.HZNUM,t.type=1,t.pageid=e.PAGEID,t.tag="PV_WAP",t.other={key:"HZ-XM",test:!0},console.log(t);var o=[];o.push(t),GZL.ajax({url:CONFIG.REPORT_API+"/gather.do",method:"POST",data:{data:JSON.stringify(o)}})},!0)}),t}(window,window.HZM=window.HZM||{});